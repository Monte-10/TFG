El servidor se ha desarrollado utilizando el framework Django, que proporciona una estructura modular y reutilizable, facilitando el desarrollo y mantenimiento de la aplicación. A continuación, Figura \ref{FIG:estructuraserver} ilustra la estructura general del servidor y la interacción entre sus componentes, así como la conexión con la API REST y los clientes (aplicaciones web y móvil):

\begin{figure}[Distribución Estructura Servidor]{FIG:estructuraserver}{Estructura del servidor de FitFuelBalance}
\image{16cm}{}{estructuraserver}
\end{figure}

El proyecto está configurado con un archivo \texttt{settings.py} \circled{1} que gestiona las configuraciones globales, incluyendo la base de datos, aplicaciones instaladas, middleware y otros ajustes importantes. El servidor está dividido en varias aplicaciones Django, cada una responsable de una parte específica de la funcionalidad del sistema. Las aplicaciones principales \circled{2} incluyen: Usuarios, que maneja el registro, autenticación y gestión de perfiles de los usuarios; Entrenamientos, que gestiona la creación, actualización y seguimiento de los planes de entrenamiento; y Nutrición, que administra los planes de nutrición y el seguimiento de la dieta de los usuarios.

Los modelos de Django \circled{3} definen la estructura de la base de datos. Cada modelo se traduce en una tabla de la base de datos y define los campos y las relaciones entre ellos. Algunos de los modelos clave incluyen: CustomUser, que define la información básica del usuario y deriva en \texttt{Trainer} y \texttt{RegularUser}, representando a los entrenadores y nutricionistas, y usuarios normales respectivamente; Diet, que contiene todas las comidas, alimentos y recetas que se pueden utilizar en los planes de nutrición; Option, que contiene un plan de 3 opciones de comidas distintas para cada día durante una semana; y Training, que se encarga de crear un entrenamiento con todos sus ejercicios correspondientes y sus series y repeticiones.

Las vistas en Django \circled{4} son responsables de manejar las solicitudes HTTP y devolver las respuestas adecuadas. Utilizando Django REST Framework, las vistas se han estructurado como vistas basadas en clases (Class-Based Views), facilitando la reutilización y el manejo de lógica compleja. Las principales vistas incluyen: Registro y Autenticación, que maneja el registro de nuevos usuarios y la autenticación mediante JWT; Gestión de Planes, que permite a los entrenadores y nutricionistas crear, actualizar y eliminar planes de entrenamiento y nutrición; y Seguimiento de Progreso, que controla la actualización de comidas y entrenamientos creados por los usuarios.

Los serializadores \circled{5} de Django REST Framework se utilizan para convertir instancias de modelos Django a formatos JSON y viceversa. Esto es esencial para la comunicación entre el servidor y los clientes (aplicaciones web y móvil). Los serializadores principales incluyen: Serializadores de Usuario, que convierten las instancias de los modelos de usuario; Serializadores de Deporte, que convierten las instancias de los modelos de la parte deportiva de la aplicación; y Serializadores de Nutrición, que convierten las instancias de los modelos de la parte nutritiva de la aplicación.

Las rutas URL \circled{6} definen cómo se mapean las solicitudes HTTP a las vistas correspondientes. En el archivo \texttt{urls.py}, se han definido las rutas principales de la API, organizadas por aplicación. La base de datos \circled{7} utilizada es PostgreSQL, elegida por su robustez y capacidad para manejar grandes volúmenes de datos de manera eficiente. Las migraciones de base de datos se gestionan mediante las herramientas integradas de Django.

Se ha utilizado Django REST Framework para construir la API RESTful \circled{8} que permite la comunicación entre el servidor y los clientes (aplicaciones web y móvil). Esta API maneja las solicitudes HTTP y proporciona respuestas en formato JSON. Las llamadas a la API \circled{9} se autentican utilizando tokens JWT \cite{JWT} y la librería Axios \cite{Axios} en el frontend. Se ha implementado un sistema de autenticación basado en tokens utilizando JWT (JSON Web Tokens) para asegurar las comunicaciones y gestionar las sesiones de usuario de manera segura. El servidor se ha desplegado en la plataforma Render, que permite gestionar de manera sencilla la infraestructura necesaria para la aplicación. Render proporciona un entorno de despliegue robusto y escalable, adecuado para las necesidades del proyecto.